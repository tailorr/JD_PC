function lazyLoad(t){var i=$(t),e=i.find("img");e.each(function(t){e.eq(t).offset().top<$(window).scrollTop()+$(window).height()&&setTimeout(function(){e.eq(t).attr("src",e.eq(t).attr("xsrc")).animate({opacity:1},100)},200)})}function picLoad(){$.ajax({method:"get",dataType:"json",url:"data/picList.json",success:function(t){for(var i=$(".fall-list").find("li"),e=0;e<t.list.length;e++){var n=getShortLi(".fall-list");$oDiv=$("<div>"),i.eq(n).append($oDiv),$oA=$("<a>"),$oDiv.append($oA),$oImg=$("<img>"),$oImg.attr({src:t.src,xsrc:t.list[e].xsrc}),$oA.append($oImg),$oA.append('<p class="describe">'+t.list[e].describe+"</p>"),$oA.append('<p class="price">'+t.list[e].price+"</p>")}}})}function pictureShake(t,i){var e=$(t),i=i||{},n=e.find("a"),o=null;n.each(function(t){n[t].moved=!1,n[t].original=0,n[t].target=0}),"plus"==i.dir&&(i.dis=i.dis),"minus"==i.dir&&(i.dis=-i.dis),n.hover(function(){o=$(this).find("img")||$(this).find(".item-inner"),this.moved||(this.moved=!0,this.original=parseInt(o.position()[i.attr]),this.target=parseInt(i.dis)+this.original),nowPosition={},attr=i.attr,nowPosition[attr]=this.target,o.animate(nowPosition,200)},function(){nowPosition[attr]=this.original,o.stop(!0),o.animate(nowPosition,200)})}function rightMenu(){$(".sidebar-right-item").each(function(t){$(".sidebar-right-item").eq(t).hover(function(){obj=$(this),clearTimeout(obj.timer),obj.addClass("active-outer"),$(".item-inner").eq(t).css("background","#8e090c"),obj.timer=setTimeout(function(){obj.css("border-radius",0),$(".item-inner").eq(t).animate({left:-$(".item-inner").outerWidth()},300)},200)},function(){clearTimeout(obj.timer),$(".item-inner").eq(t).css("background","#7a6e6e"),obj.removeClass("active-outer"),obj.timer=setTimeout(function(){obj.css("border-radius","3px 0 0 3px"),$(".item-inner").eq(t).animate({left:0},300)},200)})})}function sideBar(){centerVertical(".m-sidebar"),$(this).scrollTop()>=$(".enjoy-quality").offset().top-$(window).height()/2?($(".m-sidebar").animate({opacity:1},50),$(".m-sidebar-right ").animate({opacity:1},50)):($(".m-sidebar").animate({opacity:0},5),$(".m-sidebar-right ").animate({opacity:0},5))}function sideBarActive(){$(".sidebar-item").each(function(t){$(".sidebar-item").eq(t).offset().top>=$(".m-enjoy").eq(t).offset().top&&($(".sidebar-item").removeClass("active"),$(".sidebar-item").eq($(this).index()).addClass("active"))})}function centerVertical(t){var i=$(t),e=($(window).height()-i.outerHeight())/2;i.css({top:e})}function backToTop(t){$(t).click(function(){$("html,body").animate({scrollTop:0})})}function linkSkip(){function t(){$(".bottom-list").find("i").slideUp(300),$(".active-content").show().animate({top:24},400),$(".active-header").find(".slide-bar").show().css("left",$(this).position().left)}$(".active-header").find(".slide").on("mouseenter",t),$("#close").hover(function(){$(this).css({background:"url(bg/active-close.png) #ddd no-repeat center center","background-position":"0 -15px"})},function(){$(this).css({"background-position":"0 0"})}),$("#close").click(function(){$(".forbid").off("mouseenter"),$(".active-header").find(".slide-bar").hide(),$(".active-content").hide().css("top",100),$(".bottom-list").find("i").slideDown(100)}),$(".forbid").mouseleave(function(){$(".forbid").on("mouseenter",t)})}function mouseFollow(t,i){var e=$(t),i=i||{},n=e.find(".slide-bar");e.find(".slide").each(function(t){$(this).mouseenter(function(){n.stop(!0,!0);var e=parseInt($(this).position().left);i.speed=i.speed?i.speed:5,n.animate({left:e},300),i.callback&&i.callback(t)})})}function countDown(t){function i(){var i=$(t),n="",o=new Date("May 12,2018 17:18:32")-new Date,s=Math.floor(o/1e3%86400/3600),a=Math.floor(o/1e3%86400%3600/60),c=Math.floor(o/1e3%60);s=e(s),a=e(a),c=e(c),n='<span class="countdown-bg">'+s+'</span><span class="no-bg">:</span><span class="countdown-bg">'+a+'</span><span class="no-bg">:</span><span class="countdown-bg">'+c+"</span>",i.html(n)}function e(t){return t<10&&(t="0"+t),t}i(),setInterval(i,1e3)}function DropMenu(t,i){this.obj=$(t),this.timer=null,this.setting={active:"active",callback:function(){}},$.extend(this.setting,i),this.init()}function PicCarousel(t,i){this.obj=$(t),this.timer=null,this.num=0,this.defaults={button:!0,createFocusPoint:!0},$.extend(this.defaults,i||{}),this.init()}function getShortLi(t){for(var i=0,e=$(t).find("li"),n=e.eq(i).outerHeight(),o=1;o<e.length;o++)e.eq(o).outerHeight()<n&&(i=o,n=e.eq(o).outerHeight());return i}$(function(){$(".banner-close").click(function(){$(".m-banner").animate({opacity:"0",height:"0"})}),$(".ad-bg").hover(function(){$(".mask").animate({width:$(".mask").parent().outerWidth()},500)},function(){$(".mask").animate({width:0},200)}),sideBar();var t=!0;$(window).on("scroll resize",function(){$(this).scrollTop()>=$(".m-seckill").offset().top-$(".m-topbar").outerHeight()&&t&&($(".m-topbar").animate({top:0},400),t=!1),$(this).scrollTop()<$(".m-seckill").offset().top-$(".m-topbar").outerHeight()&&!t&&($(".m-topbar").animate({top:-50},100),t=!0),sideBar()}),$(window).on("scroll",sideBarActive),$(".sidebar-item").click(function(){$(window).off("scroll",sideBarActive),$(".sidebar-item").removeClass("active"),$(this).addClass("active"),$("html,body").animate({scrollTop:$(".m-enjoy").eq($(this).index()).offset().top-$(".m-topbar").outerHeight()},function(){$(window).on("scroll",sideBarActive),$(".water-fall-wrap").offset().top+$(".water-fall-wrap").outerHeight()<$(window).scrollTop()+$(window).height()&&i<3&&(i++,picLoad())})}),centerVertical(".m-sidebar-right-middle"),$(window).on("resize",function(){centerVertical(".m-sidebar-right-middle")}),backToTop(".back-to-top");new DropMenu("#city",{callback:function(){$(".city-list").find("a").on({mouseover:function(){"inner-active"!=$(this).attr("class")&&($(".city-list").find("a").removeClass("hover"),$(this).addClass("hover"))},click:function(){$(".city-list").find("a").removeClass("inner-active").removeClass("hover"),$(this).addClass("inner-active"),$(".city-name").html($(this).text())},mouseout:function(){$(".city-list").find("a").removeClass("hover")}})}}),new DropMenu("#my-jd"),new DropMenu("#my-customer"),new DropMenu("#my-navigation"),new DropMenu("#left-list"),new DropMenu("#shopping-cart"),new PicCarousel("#pic-carousel");linkSkip(),pictureShake(".shake-vertical",{attr:"top",dir:"minus",dis:5}),pictureShake(".shake-horizontal-wider",{attr:"left",dir:"plus",dis:20}),pictureShake(".shake-horizontal",{attr:"left",dir:"minus",dis:10}),rightMenu(),countDown("#countdown"),mouseFollow(".middle-header",{callback:function(t){$.ajax({method:"get",dataType:"json",url:"data/data.json",success:function(i){for(var e="",n=0;n<i.Promotion[0].content.length;n++)e+='<li><a href="#">'+i.Promotion[t].content[n]+"</a></li>",$(".Promotion-notice").html(e)}})}}),mouseFollow(".rank",{callback:function(t){$.ajax({method:"get",dataType:"json",url:"data/data.json",success:function(i){for(var e="",n=0;n<i.Rank[0].src.length;n++)e+='<li class="bottom-border right-border"><a href="#"><img class="rank-thumbnail" src="'+i.Rank[t].src[n]+'"><p>'+i.Rank[t].description[n]+"</p></a></li>";$(".rank-list").html(e)}})}}),picLoad();var i=0;$(window).on("scroll",function(){$(".water-fall-wrap").offset().top+$(".water-fall-wrap").outerHeight()<$(window).scrollTop()+$(window).height()&&i<3&&(i++,picLoad()),lazyLoad(".water-fall-wrap")}),$(".sidebar-item").last().click(function(){lazyLoad(".water-fall-wrap")})}),DropMenu.prototype={constructor:DropMenu,init:function(){var t=this;this.obj.children().eq(0).hover(function(){clearTimeout(t.timer),$(this).addClass(t.setting.active),t.obj.children().eq(1).show()},function(){t.timer=setTimeout(function(){t.obj.children().eq(0).removeClass(t.setting.active),t.obj.children().eq(1).hide()},50)}),this.obj.children().eq(1).hover(function(){clearTimeout(t.timer),t.obj.children().eq(1).show()},function(){t.timer=setTimeout(function(){t.obj.children().eq(0).removeClass(t.setting.active),t.obj.children().eq(1).hide()},50)}),this.setting.callback()}},PicCarousel.prototype={constructor:PicCarousel,init:function(){var t=this;this.obj.children(".pic-list").children().css({"z-index":0,opacity:0}),this.obj.children(".pic-list").children().eq(this.num).css({"z-index":1,opacity:1}),this.autoPlay(),this.defaults.createFocusPoint&&this.createFocusPoint(),this.defaults.button&&this.createButton(),this.obj.hover(function(){clearInterval(t.timer)},function(){t.autoPlay()})},createFocusPoint:function(){var t=this;this.obj.append('<ul class="list-dot"></ul>'),this.obj.children(".pic-list").children().each(function(){t.obj.children(".list-dot").html(t.obj.children(".list-dot").html()+"<li>")}),this.obj.children(".list-dot").children().eq(this.num).css({background:"#db192a"}),this.obj.children(".pic-list").children().each(function(i){t.obj.children(".list-dot").children().eq(i).click(function(){t.num=i,t.change()})})},createButton:function(){var t=this;this.obj.append('<span class="pre"><</span><span class="next">></span>'),this.obj.hover(function(){t.obj.find("span").css("opacity","1")},function(){t.obj.find("span").css("opacity","0")}),this.obj.find("span").hover(function(){$(this).css("background","rgba(0,0,0,0.5)")},function(){$(this).css("background","rgba(0,0,0,0.2)")}),$(".next").click(function(){t.num++,t.change()}),$(".pre").click(function(){t.num--,t.change()})},autoPlay:function(){var t=this;this.timer=setInterval(function(){t.num++,t.change()},3e3)},change:function(){this.num%=this.obj.children(".pic-list").children().size(),this.obj.children(".pic-list").children().css("z-index",0).animate({opacity:.1},0),this.obj.children(".pic-list").children().eq(this.num).css("z-index",1).animate({opacity:1},500),this.obj.children(".list-dot").children().css("background","#fff"),this.obj.children(".list-dot").children().eq(this.num).css({background:"#db192a"})}};